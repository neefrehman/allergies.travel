publish_mode: editorial_workflow

backend:
  name: github
  repo: neefrehman/allergies.travel
  branch: staging # TODO: update to master on launch
  open_authoring: true # docs: https://www.netlifycms.org/docs/open-authoring/ 

media_folder: public/static/uploads
public_folder: /uploads

# TODO: 18n support: https://www.netlifycms.org/docs/beta-features/#i18n-support


collections:

  - name: "allergens" # Used in routes, e.g., /admin/collections/tracks
    label: "Allergens" # Used in the UI
    folder: "src/data/allergens"
    extension: "json"
    format: "json"
    create: true
    editor:
      preview: false

    fields:
      - { label: Name, name: name, widget: string }
      - { label: "Last Modified", name: "lastModified", widget: "hidden" }
      - label: Translations
        name: translations
        widget: list
        required: false
        fields:
          - { label: ISO 639-3 code, name: languageCode, widget: string, hint: the three-letter ISO 639-3 code. e.g. "en" }
          - { label: Name, name: name, widget: string }


  - name: "countries"
    label: "Countries"
    folder: "src/data/countries"
    extension: "json"
    format: "json"
    create: false
    editor:
      preview: false

    fields:
      - { label: "Title", name: "title", widget: "string" }
      - { label: "Last Modified", name: "lastModified", widget: "hidden" }

      - name: Allergens
        label: allergens
        widget: list
        fields:
          - { label: "Allergen Name", name: "allergenName", widget: relation, collection: allergens, value_field: name, search_fields: [name] }
          - label: "Found in"
            name: "foundIn"
            widget: list
            fields:
              - { label: "Food Name", name: "foodName", widget: string }
              - { label: "Food Description", name: "description", widget: text }
              - { label: "Info url", name: "infoUrl", widget: string }

      - name: Cuisine Description
        label: cuisineDescription
        widget: object
        collapsed: true
        summary: Information about the countries cuisine
        required: false
        fields:
          - { label: "Description", name: "description", widget: "text", required: false }
          - { label: "Source url", name: "sourceUrl", widget: "string", required: false }

      - label: "Info"
        name: "info"
        widget: "object"
        collapsed: true
        summary: Basic info about the country
        fields: 
          - name: name
            label: Name
            widget: object
            collapsed: false
            fields:
              - { label: "Common", name: "common", widget: "string" }
              - { label: "Official", name: "official", widget: "string" }
              - label: "Native"
                name: "native"
                widget: list
                collapsed: true
                minimize_collapsed: true
                fields:
                  - { label: "Common", name: "common", widget: "string" }
                  - { label: "Official", name: "official", widget: "string" }
                  - { label: ISO 639-3 code, name: languageCode, widget: string, hint: the three-letter ISO 639-3 code. e.g. "eng" }
          - { label: "Flag", name: "flag", widget: "string" }
          - { label: "Capital", name: "capital", widget: "string" }
          - { label: "Region", name: "region", widget: "string" }
          - { label: "Subregion", name: "subregion", widget: "string" }
          - label: "Languages"
            name: "languages"
            widget: list
            fields:
              - { label: Name, name: name, widget: string }
              - { label: ISO 639-3 code, name: languageCode, widget: string, hint: the three-letter ISO 639-3 code. e.g. "eng" }
          - label: "Translations"
            name: "translations"
            widget: list
            collapsed: true
            minimize_collapsed: true
            required: false
            fields:
              - { label: "Common", name: "common", widget: "string" }
              - { label: "Official", name: "official", widget: "string" }
              - { label: ISO 639-3 code, name: languageCode, widget: string, hint: the three-letter ISO 639-3 code. e.g. "eng" }
          - label: "Currencies"
            name: "currencies"
            widget: list
            required: false
            fields:
              - { label: "Name", name: "name", widget: "string" }
              - { label: "Symbol", name: "symbol", widget: "string" }
              - { label: ISO 4217 currency code, name: currencyCode, widget: string, hint: the three-letter currency code. e.g. "USD" }
          - name: coordinates
            label: Coordinates
            widget: object
            collapsed: false
            fields:
              - { label: "Latitude", name: "latitude", widget: "number", step: 0.000001 }
              - { label: "Longitude", name: "longitude", widget: "number", step: 0.000001 }
          - name: codes
            label: Codes
            widget: object
            collapsed: true
            required: false
            fields:
              - { label: "cca2", name: "cca2", widget: "string", required: false }
              - { label: "cca3", name: "cca3", widget: "string", required: false }
              - { label: "ccn3", name: "ccn3", widget: "string", required: false }